<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChampSim: btb/ittage_64KB.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChampSim
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ittage__64KB_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ittage_64KB.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ittage__64KB_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* </span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">Code has been largely inspired  by the tagged PPM predictor simulator from Pierre Michaud, the OGEHL predictor simulator from by André Seznec, the TAGE predictor simulator from  André Seznec and Pierre Michaud, the L-TAGE simulator by Andre Seznec</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160; </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="instruction_8h.html">instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">    9</a></span>&#160;<span class="preprocessor">#define NHIST 15 </span><span class="comment">/*number of tagged tables*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#ad2f7ceb1cb5193bc3d5ee7c6a31d435e">   10</a></span>&#160;<span class="preprocessor">#define SHARINGTABLES </span><span class="comment">/* share some interleaved tables*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#ad9ff55c07f2e4cdafc7f877aedc0bcb5">   11</a></span>&#160;<span class="preprocessor">#define INITHISTLENGTH </span><span class="comment">/* use tuned history lengths*/</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/*list of the history length*/</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#ab8831730d444d8e4d91e34f3f9767a4f">   14</a></span>&#160;<span class="preprocessor">#define IUM</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//if a matching entry corresponds to an inflight branch use the real target of this inflight branch </span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">   17</a></span>&#160;<span class="preprocessor">#define LOGG 12</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifndef SHARINGTABLES</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#define TBITS 7</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifndef INITHISTLENGTH</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#define MINHIST 8       </span><span class="comment">// shortest history length</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#define MAXHIST 2000</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#aa86ad64c29b4f67a941aea7366c17a37">   27</a></span>&#160;<span class="preprocessor">#define LOGTICK  6      </span><span class="comment">//for management of the reset of useful counters</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">   28</a></span>&#160;<span class="preprocessor">#define HISTBUFFERLENGTH 4096</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//size of the history circular  buffer</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">   31</a></span>&#160;<span class="preprocessor">#define LOGSPEC 6</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classmy__predictor.html">   33</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmy__predictor.html">my_predictor</a></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">   36</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>+1]={0, 0, 10, 16, 27, 44, 60, 96, 109, 219, 449, 487, 714, 1313, 2146, 3881};</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">   37</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">TICK</a>;           <span class="comment">//control counter for the resetting of useful bits</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// utility class for index computation</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html">   40</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// this is the cyclic shift register for folding </span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// a long global history into a smaller number of bits; see P. Michaud&#39;s PPM-like predictor at CBP-1</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">   45</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">   46</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">CLENGTH</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#ab202066eaaa277735cfd2849a7e52101">   47</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1folded__history.html#ab202066eaaa277735cfd2849a7e52101">OLENGTH</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#ad34e926f5e7d2b1f43096acd6b78275e">   48</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1folded__history.html#ad34e926f5e7d2b1f43096acd6b78275e">OUTPOINT</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#a6190d99a11b3f229a2151686ae6dccf4">   50</a></span>&#160;  <a class="code" href="classmy__predictor_1_1folded__history.html#a6190d99a11b3f229a2151686ae6dccf4">folded_history</a>() { }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">   52</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a>(uint64_t original_length, uint64_t compressed_length)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> = 0;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#ab202066eaaa277735cfd2849a7e52101">OLENGTH</a> = original_length;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">CLENGTH</a> = compressed_length;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#ad34e926f5e7d2b1f43096acd6b78275e">OUTPOINT</a> = <a class="code" href="classmy__predictor_1_1folded__history.html#ab202066eaaa277735cfd2849a7e52101">OLENGTH</a> % <a class="code" href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">CLENGTH</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1folded__history.html#a5cd323ecd37e6f511c0eddf7f4b4e4cb">   60</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor_1_1folded__history.html#a5cd323ecd37e6f511c0eddf7f4b4e4cb">update</a>(uint8_t* h, uint64_t PT)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> = (<a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> &lt;&lt; 1) | h[PT &amp; (<a class="code" href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">HISTBUFFERLENGTH</a> - 1)];</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> ^= h[(PT + <a class="code" href="classmy__predictor_1_1folded__history.html#ab202066eaaa277735cfd2849a7e52101">OLENGTH</a>) &amp; (<a class="code" href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">HISTBUFFERLENGTH</a> - 1)] &lt;&lt; <a class="code" href="classmy__predictor_1_1folded__history.html#ad34e926f5e7d2b1f43096acd6b78275e">OUTPOINT</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> ^= (<a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> &gt;&gt; <a class="code" href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">CLENGTH</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> &amp;= (1 &lt;&lt; <a class="code" href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">CLENGTH</a>) - 1;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;};</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//class for storing speculative predictions: i.e. provided by a table entry that has already provided a still speculative prediction</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1specentry.html">   71</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmy__predictor_1_1specentry.html">specentry</a></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1specentry.html#ad9b2c6317f3837eba6852b2e4255cfea">   74</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1specentry.html#ad9b2c6317f3837eba6852b2e4255cfea">tag</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1specentry.html#af737e82d3d1a84a517eca15a8f88871a">   75</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1specentry.html#af737e82d3d1a84a517eca15a8f88871a">pred</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1specentry.html#afb4f2a4d17ab69c516d56f28737beef2">   76</a></span>&#160;  <a class="code" href="classmy__predictor_1_1specentry.html#afb4f2a4d17ab69c516d56f28737beef2">specentry</a> (){ <span class="comment">//nothing</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;};</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1gentry.html">   81</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmy__predictor_1_1gentry.html">gentry</a>            <span class="comment">// ITTAGE global table entry</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">   84</a></span>&#160;  int8_t <a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a>;           <span class="comment">// 2 bits </span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1gentry.html#a9e964d3a52130a7888d84292542cee80">   85</a></span>&#160;  uint16_t <a class="code" href="classmy__predictor_1_1gentry.html#a9e964d3a52130a7888d84292542cee80">tag</a>;         <span class="comment">// width dependent on the table</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">   86</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">target</a>;      <span class="comment">// 25 bits (18 offset + 7-bit region pointer)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1gentry.html#a54511bb821144db8c3d23ebd84662fdb">   87</a></span>&#160;  int8_t <a class="code" href="classmy__predictor_1_1gentry.html#a54511bb821144db8c3d23ebd84662fdb">u</a>;         <span class="comment">// 1 bit</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1gentry.html#a3d95e40d2996bbc2dfa161936b5debf8">   88</a></span>&#160;  <a class="code" href="classmy__predictor_1_1gentry.html#a3d95e40d2996bbc2dfa161936b5debf8">gentry</a> ()</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a> = 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classmy__predictor_1_1gentry.html#a9e964d3a52130a7888d84292542cee80">tag</a> = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classmy__predictor_1_1gentry.html#a54511bb821144db8c3d23ebd84662fdb">u</a> = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">target</a> = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;};</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1regionentry.html">   97</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmy__predictor_1_1regionentry.html">regionentry</a>       <span class="comment">// ITTAGE target region table entry</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">  100</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a>; <span class="comment">// 46 bits</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">  101</a></span>&#160;  int8_t <a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a>;        <span class="comment">// 1 bit</span></div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classmy__predictor_1_1regionentry.html#aa67fc0abe25da18359a8922b55aa9e18">  102</a></span>&#160;  <a class="code" href="classmy__predictor_1_1regionentry.html#aa67fc0abe25da18359a8922b55aa9e18">regionentry</a> ()</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> = 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a> = 0;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;};</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">  109</a></span>&#160;int8_t <a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a>;       <span class="comment">// &quot;Use alternate prediction on weak predictions&quot;:  a 4-bit counter  to determine whether the newly allocated entries should be considered as  valid or not for delivering  the prediction</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//for managing global history and path</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">  113</a></span>&#160;uint8_t <a class="code" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">ghist</a>[<a class="code" href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">HISTBUFFERLENGTH</a>];</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">//for management at fetch time</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a4028e1ba2f51db2af6188210637a214e">  115</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a4028e1ba2f51db2af6188210637a214e">Fetch_ptghist</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">  116</a></span>&#160;<a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> <a class="code" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">Fetch_ch_i</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];   <span class="comment">//utility for computing TAGE indices</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">  117</a></span>&#160;<a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[2][<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];    <span class="comment">//utility for computing TAGE tags</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// for management at retire time</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a3c31bf7e43653332e3f68f4f1504ce61">  120</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a3c31bf7e43653332e3f68f4f1504ce61">Retire_ptghist</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">  121</a></span>&#160;<a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> <a class="code" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">Retire_ch_i</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];  <span class="comment">//utility for computing TAGE indices</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">  122</a></span>&#160;<a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[2][<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];   <span class="comment">//utility for computing TAGE tags</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">//predictor tables</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">  126</a></span>&#160;<a class="code" href="classmy__predictor_1_1gentry.html">gentry</a> *<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];  <span class="comment">// ITTAGE tables (T0 has no tags other tables are tagged) </span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">  127</a></span>&#160;<a class="code" href="classmy__predictor_1_1regionentry.html">regionentry</a> *<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>; <span class="comment">// Target region tables </span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">  130</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];      <span class="comment">// tag width for the different tagged tables</span></div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">  131</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];        <span class="comment">// log of number entries of the different tagged tables</span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">  132</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1] ;     <span class="comment">// indexes to the different tables are computed only once  </span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">  133</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> + 1];   <span class="comment">// tags for the different tables are computed only once  </span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a92592882bc342677d4f2b957242d8611">  136</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a92592882bc342677d4f2b957242d8611">pred_taken</a>;        <span class="comment">// prediction</span></div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">  137</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a>;      <span class="comment">// alternate  TAGEprediction</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">  138</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a>;     <span class="comment">// TAGE prediction</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">  139</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>;            <span class="comment">// longest matching bank</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">  140</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a>;            <span class="comment">// alternate matching bank</span></div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">  141</a></span>&#160;uint64_t <a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">  143</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a>;           <span class="comment">// for the pseudo-random number generator</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//for the IUM</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">  146</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">PtIumRetire</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">  147</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">  148</a></span>&#160;<a class="code" href="classmy__predictor_1_1specentry.html">specentry</a> *<a class="code" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">IUMPred</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a4c77eb4b95aa891760e140b8161d6d94">  152</a></span>&#160;  <a class="code" href="classmy__predictor.html#a4c77eb4b95aa891760e140b8161d6d94">my_predictor</a> (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a> = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a> = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">PtIumRetire</a> = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a> = 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">HISTBUFFERLENGTH</a>; i++)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">ghist</a>[0] = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="classmy__predictor.html#a4028e1ba2f51db2af6188210637a214e">Fetch_ptghist</a> = 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classmy__predictor.html#a3c31bf7e43653332e3f68f4f1504ce61">Retire_ptghist</a> = 0;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#ifndef INITHISTLENGTH</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[0] = 0;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[1] = 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[2] = <a class="code" href="hashed__perceptron_8cc.html#a3f0eab8cf8b221b98f2db047ad2958d8">MINHIST</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>] = <a class="code" href="hashed__perceptron_8cc.html#a41ba038635d6b8c9533fdfc5e2cf55d6">MAXHIST</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 3; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i] = (int) (((<span class="keywordtype">double</span>) <a class="code" href="hashed__perceptron_8cc.html#a3f0eab8cf8b221b98f2db047ad2958d8">MINHIST</a> * pow ((<span class="keywordtype">double</span>) (<a class="code" href="hashed__perceptron_8cc.html#a41ba038635d6b8c9533fdfc5e2cf55d6">MAXHIST</a>) / (<span class="keywordtype">double</span>) <a class="code" href="hashed__perceptron_8cc.html#a3f0eab8cf8b221b98f2db047ad2958d8">MINHIST</a>, (<span class="keywordtype">double</span>) (i - 2) / (<span class="keywordtype">double</span>) ((<a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a> - 2)))) + 0.5);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i] &lt;= <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i - 1] + 2)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i] = <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i - 1] + 2;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#ifndef SHARINGTABLES</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] = (<a class="code" href="tage__sc__l_8cc.html#a0451c34405aa969aa227ee6ebc47fbe8">TBITS</a> + i);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] &gt;= 16)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] = 16;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[0] = 0;          <span class="comment">// table T0 is tagless</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[1] = 6;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[1]= <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a>-1;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt;= 4; i++)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a> - 2;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 5; i &lt;= 13; i++)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a> - 3;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 14; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a> - 4;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">#ifdef SHARINGTABLES</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#define STEP1 3</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#define STEP2 11</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[1] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>] = <a class="code" href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a> - 1;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt;= <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>-1; i++)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i] = <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[1] - 3;    <span class="comment">/* grouped together with T1 4Kentries */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>+1; i &lt;= <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>-1; i++)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i] = <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>] - 3;    <span class="comment">/*grouped together with T4 4K entries */</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>+1; i &lt;= 15; i++)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i] = <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>] - 3;    <span class="comment">/*grouped together with T12 2K entries */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[0] = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1gentry.html">gentry</a>[1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0]];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[1] = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1gentry.html">gentry</a>[1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[1]];</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>] = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1gentry.html">gentry</a>[1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>]];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>] = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1gentry.html">gentry</a>[1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>]];</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[0] = 0; <span class="comment">//T0 is tagless</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>-1; i++) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i] = <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[1];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] = 9;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>; i &lt;= <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>-1; i++) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i] = <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] = 13;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>; i &lt;= 15; i++) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i] = <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] = 15;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">//initialisation of index and tag computation functions</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <a class="code" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">Fetch_ch_i</a>[i].<a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a> (<a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i], (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i]));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[0][i].<a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a> (<a class="code" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">Fetch_ch_i</a>[i].OLENGTH, <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i]);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[1][i].<a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a> (<a class="code" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">Fetch_ch_i</a>[i].OLENGTH, <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] - 1);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">Retire_ch_i</a>[i].<a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a> (<a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i], (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i]));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[0][i].<a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a> (<a class="code" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">Retire_ch_i</a>[i].OLENGTH, <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i]);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[1][i].<a class="code" href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">init</a> (<a class="code" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">Retire_ch_i</a>[i].OLENGTH, <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i] - 1);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a> = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1regionentry.html">regionentry</a>[128];</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">IUMPred</a> = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1specentry.html">specentry</a>[1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>];</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#ifndef SHARINGTABLES</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i] = <span class="keyword">new</span> <a class="code" href="classmy__predictor_1_1gentry.html">gentry</a>[1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i])];</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#define PRINTCHAR</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#ifdef PRINTCHAR</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">//for printing predictor characteristics</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">int</span> NBENTRY = 0;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">int</span> STORAGESIZE = 0;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    fprintf(stdout,<span class="stringliteral">&quot;history lengths: &quot;</span> );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      fprintf (stdout, <span class="stringliteral">&quot;%d &quot;</span>, <a class="code" href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">m</a>[i]);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    fprintf (stdout, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#ifndef SHARINGTABLES</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      STORAGESIZE += (1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i]) * (25 + 2 + (i != 0) + <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[i]);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      NBENTRY += (1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i]);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">//The ITTAGE physical  tables: four global tables shared (interleaved) among several logic ITTAGE tables</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">//Entry width: target 25 bits + 2 bits  confidence counter + TB[i] tag bits + 1 useful bit (except T0)</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    STORAGESIZE += (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0])) * (25 + 2 + <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[0]);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    STORAGESIZE += (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[1])) * (25 + 2 + 1 + <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[1]);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    STORAGESIZE += (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>])) * (25 + 2 + 1 + <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>]);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    STORAGESIZE += (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>])) * (25 + 2 + 1 + <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>]);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    NBENTRY += (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0])) + (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[1])) + (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>])) + (1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>]));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    fprintf(stdout, <span class="stringliteral">&quot;ITTAGE tables: %d bytes;&quot;</span>,  STORAGESIZE/8);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    fprintf(stdout, <span class="stringliteral">&quot;Region table: %d bytes;&quot;</span>,  15*128/8);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    STORAGESIZE += 15 * 128;    <span class="comment">//Region Table (14 bits Region + 1 bit for replacement)</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#ifdef IUM</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    fprintf(stdout, <span class="stringliteral">&quot;IUM: %d bytes;&quot;</span>,  (1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>) * 48/8);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    STORAGESIZE += (1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>) * 48; <span class="comment">//entries in the speculative update table are 32 bits + 16 tag bits</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    fprintf (stdout, <span class="stringliteral">&quot;Total Storage= %d bytes;\n&quot;</span>, STORAGESIZE / 8);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// the index functions for the tagged tables uses path history as in the OGEHL predictor</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// gindex computes a full hash of pc, ghist </span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a8982b3919ed4db66dda832bd6b7c6bc6">  292</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor.html#a8982b3919ed4db66dda832bd6b7c6bc6">gindex</a> (uint64_t pc, <span class="keywordtype">int</span> bank, <a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a>* <a class="code" href="tage__sc__l_8cc.html#a90ecac4f603f0aaa9bc2fe8254b50a21">ch_i</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    uint64_t index;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    index = pc ^ (pc &gt;&gt; (abs (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[bank] - bank) + 1)) ^ <a class="code" href="tage__sc__l_8cc.html#a90ecac4f603f0aaa9bc2fe8254b50a21">ch_i</a>[bank].<a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span> (index &amp; ((1 &lt;&lt; (<a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[bank])) - 1));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// tag computation</span></div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classmy__predictor.html#ad7b1fa96d579f049496a08a2f8cfd30e">  300</a></span>&#160;  uint16_t <a class="code" href="classmy__predictor.html#ad7b1fa96d579f049496a08a2f8cfd30e">gtag</a>(uint64_t pc, <span class="keywordtype">int</span> bank, <a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a>* ch0, <a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a>* ch1)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    uint16_t tag = pc ^ ch0[bank].<a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> ^ (ch1[bank].<a class="code" href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">comp</a> &lt;&lt; 1);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> (tag &amp; ((1 &lt;&lt; <a class="code" href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">TB</a>[bank]) - 1));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">//just a simple pseudo random number generator: use available information</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// to allocate entries in the loop predictor</span></div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a91112dc020e4699842c27038ca08cfd9">  309</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classmy__predictor.html#a91112dc020e4699842c27038ca08cfd9">MYRANDOM</a>()</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a>++;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a> ^= <a class="code" href="classmy__predictor.html#a4028e1ba2f51db2af6188210637a214e">Fetch_ptghist</a>;  </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a> = (<a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a> &gt;&gt; 11) + (<a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a> &lt;&lt; 21);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a> += <a class="code" href="classmy__predictor.html#a3c31bf7e43653332e3f68f4f1504ce61">Retire_ptghist</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">Seed</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  };</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  </div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a7fb782514eacbd6e26cffc0468c58b67">  319</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor.html#a7fb782514eacbd6e26cffc0468c58b67">Tagepred</a>()</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> = 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a> = -1; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a> = -1;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">//Look for the bank with longest matching history</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i &gt;= 0; i--) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].tag == <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[i]) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a> = i;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">//Look for the alternate bank</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a> - 1; i &gt;= 0; i--) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].tag == <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[i]) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a> = i;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">//computes the prediction and the alternate prediction</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a> &gt;= 0)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> = <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">target</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a> = <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">target</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">//proceed with the indirection through the target region table</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> = (<a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> &amp; ((1 &lt;&lt; 18) - 1)) + (<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[(<a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> &gt;&gt; 18) &amp; 127].<a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> &lt;&lt; 18);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a> = (<a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a> &amp; ((1 &lt;&lt; 18) - 1)) + (<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[(<a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a> &gt;&gt; 18) &amp; 127].<a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> &lt;&lt; 18);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> = <a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">//if the entry is recognized as a newly allocated entry and </span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">//USE_ALT_ON_NA is positive  use the alternate prediction</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a> &gt;= 0)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a> &gt;= 0) &amp; (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a> == 0))</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a> = <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a>;  </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// PREDICTION</span></div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="classmy__predictor.html#ac8c3aedeefa14e48d632d1af73e4f612">  355</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor.html#ac8c3aedeefa14e48d632d1af73e4f612">predict_brindirect</a>(uint64_t pc)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// computes the table addresses and the partial tags</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = <a class="code" href="classmy__predictor.html#a8982b3919ed4db66dda832bd6b7c6bc6">gindex</a>(pc, i,  <a class="code" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">Fetch_ch_i</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[i] = <a class="code" href="classmy__predictor.html#ad7b1fa96d579f049496a08a2f8cfd30e">gtag</a>(pc, i, <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[0], <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[1]);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">#ifdef SHARINGTABLES</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt;= <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>-1; i++)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = ((<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[1] &amp; 7) ^ (i - 1)) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] &lt;&lt; 3);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>+1; i &lt;= <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>-1; i++)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = ((<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>] &amp; 7) ^ (i - <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>)) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] &lt;&lt; 3);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>+1; i &lt;= 15; i++)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = ((<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>] &amp; 7) ^ (i - <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>)) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] &lt;&lt; 3);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">#endif  </span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[0] = 0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[0] = pc &amp; ((1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0]) - 1);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classmy__predictor.html#a7fb782514eacbd6e26cffc0468c58b67">Tagepred</a>();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">//if the entry providing the target already provides </span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classmy__predictor.html#a92592882bc342677d4f2b957242d8611">pred_taken</a> = <a class="code" href="classmy__predictor.html#aac853bc20941cc22f4de9af0c5969e20">PredSpecIUM</a>(<a class="code" href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">tage_pred</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classmy__predictor.html#a92592882bc342677d4f2b957242d8611">pred_taken</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  </div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="classmy__predictor.html#aac853bc20941cc22f4de9af0c5969e20">  384</a></span>&#160;  uint64_t <a class="code" href="classmy__predictor.html#aac853bc20941cc22f4de9af0c5969e20">PredSpecIUM</a>(uint64_t pred)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#ifdef IUM</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    uint64_t IumTag = (<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>] &lt;&lt; 4);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">int</span> Min = (<a class="code" href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">PtIumRetire</a> &gt; <a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a> + 8) ? <a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a> + 8 : <a class="code" href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">PtIumRetire</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a>; i &lt; Min; i++) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">IUMPred</a>[i &amp; ((1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>) - 1)].tag == IumTag)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">IUMPred</a>[i &amp; ((1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>) - 1)].<a class="code" href="classmy__predictor_1_1specentry.html#af737e82d3d1a84a517eca15a8f88871a">pred</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> pred;  </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  </div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="classmy__predictor.html#ad3625767e44327932b0cb021da57e527">  398</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor.html#ad3625767e44327932b0cb021da57e527">UpdateSpecIUM</a>(uint64_t target)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">#ifdef IUM</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    uint64_t IumTag = (<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>] &lt;&lt; 4);  </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a>--;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">IUMPred</a>[<a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a> &amp; ((1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>) - 1)].<a class="code" href="classmy__predictor_1_1specentry.html#ad9b2c6317f3837eba6852b2e4255cfea">tag</a> = IumTag;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">IUMPred</a>[<a class="code" href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">PtIumFetch</a> &amp; ((1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a>) - 1)].<a class="code" href="classmy__predictor_1_1specentry.html#af737e82d3d1a84a517eca15a8f88871a">pred</a> = target;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// UPDATE FETCH HISTORIES  </span></div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="classmy__predictor.html#ae115d316ee7974561767dc8d60a3629c">  409</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor.html#ae115d316ee7974561767dc8d60a3629c">fetch_history_update</a>(uint64_t pc, uint8_t <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a>, uint8_t taken, uint64_t target)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5eae5e75f5730c30b38e3d5e3398bab6b10">BRANCH_INDIRECT</a>) || (<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5ea089c56d2c14fd417e6a80d2d72bba2bb">BRANCH_INDIRECT_CALL</a>)) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="classmy__predictor.html#ad3625767e44327932b0cb021da57e527">UpdateSpecIUM</a>(target);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="classmy__predictor.html#a7e10ba446010f108b68d5067f1f3292a">HistoryUpdate</a>(pc, <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a>, taken, target, <a class="code" href="classmy__predictor.html#a4028e1ba2f51db2af6188210637a214e">Fetch_ptghist</a>, <a class="code" href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">Fetch_ch_i</a>, <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[0], <a class="code" href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">Fetch_ch_t</a>[1]);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  </div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a7e10ba446010f108b68d5067f1f3292a">  417</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor.html#a7e10ba446010f108b68d5067f1f3292a">HistoryUpdate</a>(uint64_t pc, uint8_t <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a>, uint8_t taken, uint64_t target, uint64_t &amp;Y, <a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> * H, <a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> * G, <a class="code" href="classmy__predictor_1_1folded__history.html">folded_history</a> * J)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">int</span> maxt = ((<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5eae5e75f5730c30b38e3d5e3398bab6b10">BRANCH_INDIRECT</a>) || (<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5ea089c56d2c14fd417e6a80d2d72bba2bb">BRANCH_INDIRECT_CALL</a>)) ? 10 : 0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5ea81be858e590c9840eca00415668e14d2">BRANCH_DIRECT_CALL</a>)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      maxt = 5;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    uint64_t PATH = ((target ^ (target &gt;&gt; 3) ^ pc));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5eacfd0d336eece485adcd2708e1f8bb5ea">BRANCH_CONDITIONAL</a>)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      PATH = taken;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; maxt; t++) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordtype">bool</span> P = (PATH  &amp; 1);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      PATH &gt;&gt;= 1;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="comment">//update history</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      Y--;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">ghist</a>[Y &amp; (<a class="code" href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">HISTBUFFERLENGTH</a> - 1)] = P;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="comment">//prepare next index and tag computations for user branchs </span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {    </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    H[i].<a class="code" href="classmy__predictor_1_1folded__history.html#a5cd323ecd37e6f511c0eddf7f4b4e4cb">update</a>(<a class="code" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">ghist</a>, Y);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    G[i].<a class="code" href="classmy__predictor_1_1folded__history.html#a5cd323ecd37e6f511c0eddf7f4b4e4cb">update</a>(<a class="code" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">ghist</a>, Y);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    J[i].<a class="code" href="classmy__predictor_1_1folded__history.html#a5cd323ecd37e6f511c0eddf7f4b4e4cb">update</a>(<a class="code" href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">ghist</a>, Y);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">//END UPDATE FETCH HISTORIES</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">// PREDICTOR UPDATE</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  </div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="classmy__predictor.html#a3b35e11ab8bbce00ed31537699dc35a9">  448</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classmy__predictor.html#a3b35e11ab8bbce00ed31537699dc35a9">update_brindirect</a>(uint64_t pc, uint8_t <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a>, uint8_t taken, uint64_t target)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordtype">int</span> NRAND = <a class="code" href="classmy__predictor.html#a91112dc020e4699842c27038ca08cfd9">MYRANDOM</a> ();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5eae5e75f5730c30b38e3d5e3398bab6b10">BRANCH_INDIRECT</a>) || (<a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a> == <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5ea089c56d2c14fd417e6a80d2d72bba2bb">BRANCH_INDIRECT_CALL</a>)) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <a class="code" href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">PtIumRetire</a>--;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment">//Recompute the prediction by the ITTAGE predictor: on an effective implementation one would try to avoid this recomputation by propagating the prediction with the branch instruction</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = <a class="code" href="classmy__predictor.html#a8982b3919ed4db66dda832bd6b7c6bc6">gindex</a> (pc, i, <a class="code" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">Retire_ch_i</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[i] = <a class="code" href="classmy__predictor.html#ad7b1fa96d579f049496a08a2f8cfd30e">gtag</a> (pc, i, <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[0], <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[1]);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#ifdef SHARINGTABLES</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 2; i &lt;= <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>-1; i++)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = ((<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[1] &amp; 7) ^ (i - 1)) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] &lt;&lt; 3);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>+1; i &lt;= <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>-1; i++)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = ((<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>] &amp; 7) ^ (i - <a class="code" href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a>)) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] &lt;&lt; 3);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>+1; i &lt;= 15; i++)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] = ((<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>] &amp; 7) ^ (i - <a class="code" href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a>)) + (<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i] &lt;&lt; 3);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[0] = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[0] = pc &amp; ((1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[0]) - 1);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="classmy__predictor.html#a7fb782514eacbd6e26cffc0468c58b67">Tagepred</a>();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordtype">bool</span> ALLOC = (<a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> != target);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">//allocation if the Longest Matching entry does not provide the correct entry</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a> &gt; 0) &amp; (<a class="code" href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">AltBank</a> &gt;= 0)) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">// Manage the selection between longest matching and alternate matching</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">// for &quot;pseudo&quot;-newly allocated longest matching entry</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordtype">bool</span> PseudoNewAlloc = (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a> == 0);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (PseudoNewAlloc) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a>) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> != <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a>) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> == target) || (<a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> == target)) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a> == target) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a> &lt; 7)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a>++;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a> &gt;= -8)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <a class="code" href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">USE_ALT_ON_NA</a>--;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;          }  </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">if</span> (ALLOC) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">//Need to compute the target field (Offset + Region pointer)</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    uint64_t Region = (target &gt;&gt; 18);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    int64_t PtRegion = -1;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">//Associative search on the region table</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 128; i++) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].region == Region) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        PtRegion = i;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (PtRegion == -1) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="comment">//miss in the target region table, allocate a free entry</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 128; i++) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].u == 0) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          PtRegion = i;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].<a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> = Region;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].<a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a> = 1;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="comment">// a very simple  replacement policy (don&#39;t care for the competition, but some replacement is needed in a real processor)</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (PtRegion == -1) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 128; i++) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].<a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a> = 0;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        PtRegion = 0;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[0].<a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> = Region;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[0].<a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a> = 1;  </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    uint64_t IndTarget = (target &amp; ((1 &lt;&lt; 18) - 1)) + (PtRegion &lt;&lt; 18);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// we allocate an entry with a longer history</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">//to  avoid ping-pong, we do not choose systematically the next entry, but among the 2 next entries</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordtype">int</span> Y = NRAND;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">int</span> X = <a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a> + 1;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> ((Y &amp; 31) == 0) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      X++;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">int</span> T = 2;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">//allocating 3 entries on a misprediction just work a little bit better than a single allocation</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = X; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i += 1) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].u == 0) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].<a class="code" href="classmy__predictor_1_1gentry.html#a9e964d3a52130a7888d84292542cee80">tag</a> = <a class="code" href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">GTAG</a>[i];</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].<a class="code" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">target</a> = IndTarget;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].<a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a> = 0;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[i]].<a class="code" href="classmy__predictor_1_1gentry.html#a54511bb821144db8c3d23ebd84662fdb">u</a> = 0;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">TICK</a> &gt; 0)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;          <a class="code" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">TICK</a>--;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> (T == 0)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        T--;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        i += 1;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">TICK</a>++;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">TICK</a> &gt;= (1 &lt;&lt; <a class="code" href="ittage__64KB_8h.html#aa86ad64c29b4f67a941aea7366c17a37">LOGTICK</a>))) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">TICK</a> = 0;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">// reset the useful  bit</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code" href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a>; i++)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; (1 &lt;&lt; <a class="code" href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">logg</a>[i]); j++)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[i][j].u = 0;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> == target) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].ctr &lt; 3)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a>++;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].ctr &gt; 0)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">ctr</a>--;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">else</span> { <span class="comment">// replace the target field by the new target</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">// Need to compute the target field :-)</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      uint64_t Region = (target &gt;&gt; 18);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      int64_t PtRegion = -1;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 128; i++)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].region == Region) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          PtRegion = i;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">if</span> (PtRegion == -1) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 128; i++)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].u == 0) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        PtRegion = i;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].<a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> = Region;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].<a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a> = 1;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">//a very simple replacement policy (don&#39;t care for the competition, but some replacement is needed in a real processor)</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">if</span> (PtRegion == -1) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 128; i++)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[i].u = 0;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          PtRegion = 0;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[0].<a class="code" href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">region</a> = Region;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;          <a class="code" href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">rtable</a>[0].<a class="code" href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">u</a> = 1;  </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      uint64_t IndTarget = (target &amp; ((1 &lt;&lt; 18) - 1)) + (PtRegion &lt;&lt; 18);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">target</a> = IndTarget;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="comment">// update the u bit</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a> != 0) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> != <a class="code" href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">alttaken</a>) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">LongestMatchPred</a> == target) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">gtable</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>][<a class="code" href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">GI</a>[<a class="code" href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">HitBank</a>]].<a class="code" href="classmy__predictor_1_1gentry.html#a54511bb821144db8c3d23ebd84662fdb">u</a> = 1;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">//END PREDICTOR UPDATE</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// UPDATE RETIRE HISTORY PATH  </span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="classmy__predictor.html#a7e10ba446010f108b68d5067f1f3292a">HistoryUpdate</a>(pc, <a class="code" href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a>, taken, target, <a class="code" href="classmy__predictor.html#a3c31bf7e43653332e3f68f4f1504ce61">Retire_ptghist</a>, <a class="code" href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">Retire_ch_i</a>, <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[0], <a class="code" href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">Retire_ch_t</a>[1]);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;};</div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html">my_predictor::folded_history</a></div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:41</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_a5cd323ecd37e6f511c0eddf7f4b4e4cb"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#a5cd323ecd37e6f511c0eddf7f4b4e4cb">my_predictor::folded_history::update</a></div><div class="ttdeci">void update(uint8_t *h, uint64_t PT)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:60</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_a6190d99a11b3f229a2151686ae6dccf4"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#a6190d99a11b3f229a2151686ae6dccf4">my_predictor::folded_history::folded_history</a></div><div class="ttdeci">folded_history()</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:50</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_a69a275737364da8506ec6afd43f7f7bc"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#a69a275737364da8506ec6afd43f7f7bc">my_predictor::folded_history::comp</a></div><div class="ttdeci">uint64_t comp</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:45</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_a86295552dba6f5ca3bb20bc042892d8d"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#a86295552dba6f5ca3bb20bc042892d8d">my_predictor::folded_history::init</a></div><div class="ttdeci">void init(uint64_t original_length, uint64_t compressed_length)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:52</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_aa82282a985e5a824cde5ddcbe870eb8a"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#aa82282a985e5a824cde5ddcbe870eb8a">my_predictor::folded_history::CLENGTH</a></div><div class="ttdeci">uint64_t CLENGTH</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:46</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_ab202066eaaa277735cfd2849a7e52101"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#ab202066eaaa277735cfd2849a7e52101">my_predictor::folded_history::OLENGTH</a></div><div class="ttdeci">uint64_t OLENGTH</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:47</div></div>
<div class="ttc" id="aclassmy__predictor_1_1folded__history_html_ad34e926f5e7d2b1f43096acd6b78275e"><div class="ttname"><a href="classmy__predictor_1_1folded__history.html#ad34e926f5e7d2b1f43096acd6b78275e">my_predictor::folded_history::OUTPOINT</a></div><div class="ttdeci">uint64_t OUTPOINT</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:48</div></div>
<div class="ttc" id="aclassmy__predictor_1_1gentry_html"><div class="ttname"><a href="classmy__predictor_1_1gentry.html">my_predictor::gentry</a></div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:82</div></div>
<div class="ttc" id="aclassmy__predictor_1_1gentry_html_a0fcbb32ab5cbb81c785135b2a929f1e9"><div class="ttname"><a href="classmy__predictor_1_1gentry.html#a0fcbb32ab5cbb81c785135b2a929f1e9">my_predictor::gentry::target</a></div><div class="ttdeci">uint64_t target</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:86</div></div>
<div class="ttc" id="aclassmy__predictor_1_1gentry_html_a3d95e40d2996bbc2dfa161936b5debf8"><div class="ttname"><a href="classmy__predictor_1_1gentry.html#a3d95e40d2996bbc2dfa161936b5debf8">my_predictor::gentry::gentry</a></div><div class="ttdeci">gentry()</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:88</div></div>
<div class="ttc" id="aclassmy__predictor_1_1gentry_html_a54511bb821144db8c3d23ebd84662fdb"><div class="ttname"><a href="classmy__predictor_1_1gentry.html#a54511bb821144db8c3d23ebd84662fdb">my_predictor::gentry::u</a></div><div class="ttdeci">int8_t u</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:87</div></div>
<div class="ttc" id="aclassmy__predictor_1_1gentry_html_a9e964d3a52130a7888d84292542cee80"><div class="ttname"><a href="classmy__predictor_1_1gentry.html#a9e964d3a52130a7888d84292542cee80">my_predictor::gentry::tag</a></div><div class="ttdeci">uint16_t tag</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:85</div></div>
<div class="ttc" id="aclassmy__predictor_1_1gentry_html_af226aae7b0bf0ecfe43280d18f4a9cef"><div class="ttname"><a href="classmy__predictor_1_1gentry.html#af226aae7b0bf0ecfe43280d18f4a9cef">my_predictor::gentry::ctr</a></div><div class="ttdeci">int8_t ctr</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:84</div></div>
<div class="ttc" id="aclassmy__predictor_1_1regionentry_html"><div class="ttname"><a href="classmy__predictor_1_1regionentry.html">my_predictor::regionentry</a></div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:98</div></div>
<div class="ttc" id="aclassmy__predictor_1_1regionentry_html_a7fb9dbad2f27cfd78ab7bec7fe3b1254"><div class="ttname"><a href="classmy__predictor_1_1regionentry.html#a7fb9dbad2f27cfd78ab7bec7fe3b1254">my_predictor::regionentry::u</a></div><div class="ttdeci">int8_t u</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:101</div></div>
<div class="ttc" id="aclassmy__predictor_1_1regionentry_html_aa67fc0abe25da18359a8922b55aa9e18"><div class="ttname"><a href="classmy__predictor_1_1regionentry.html#aa67fc0abe25da18359a8922b55aa9e18">my_predictor::regionentry::regionentry</a></div><div class="ttdeci">regionentry()</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:102</div></div>
<div class="ttc" id="aclassmy__predictor_1_1regionentry_html_ac31bc9de786b941254b8a41f5062ae4c"><div class="ttname"><a href="classmy__predictor_1_1regionentry.html#ac31bc9de786b941254b8a41f5062ae4c">my_predictor::regionentry::region</a></div><div class="ttdeci">uint64_t region</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:100</div></div>
<div class="ttc" id="aclassmy__predictor_1_1specentry_html"><div class="ttname"><a href="classmy__predictor_1_1specentry.html">my_predictor::specentry</a></div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:72</div></div>
<div class="ttc" id="aclassmy__predictor_1_1specentry_html_ad9b2c6317f3837eba6852b2e4255cfea"><div class="ttname"><a href="classmy__predictor_1_1specentry.html#ad9b2c6317f3837eba6852b2e4255cfea">my_predictor::specentry::tag</a></div><div class="ttdeci">uint64_t tag</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:74</div></div>
<div class="ttc" id="aclassmy__predictor_1_1specentry_html_af737e82d3d1a84a517eca15a8f88871a"><div class="ttname"><a href="classmy__predictor_1_1specentry.html#af737e82d3d1a84a517eca15a8f88871a">my_predictor::specentry::pred</a></div><div class="ttdeci">uint64_t pred</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:75</div></div>
<div class="ttc" id="aclassmy__predictor_1_1specentry_html_afb4f2a4d17ab69c516d56f28737beef2"><div class="ttname"><a href="classmy__predictor_1_1specentry.html#afb4f2a4d17ab69c516d56f28737beef2">my_predictor::specentry::specentry</a></div><div class="ttdeci">specentry()</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:76</div></div>
<div class="ttc" id="aclassmy__predictor_html"><div class="ttname"><a href="classmy__predictor.html">my_predictor</a></div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:34</div></div>
<div class="ttc" id="aclassmy__predictor_html_a067ebcaa8686da01bb5a0226254ba461"><div class="ttname"><a href="classmy__predictor.html#a067ebcaa8686da01bb5a0226254ba461">my_predictor::HitBank</a></div><div class="ttdeci">int HitBank</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:139</div></div>
<div class="ttc" id="aclassmy__predictor_html_a20562e63384d14c6a1612e07b7ac5023"><div class="ttname"><a href="classmy__predictor.html#a20562e63384d14c6a1612e07b7ac5023">my_predictor::alttaken</a></div><div class="ttdeci">uint64_t alttaken</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:137</div></div>
<div class="ttc" id="aclassmy__predictor_html_a2155c3dabefeb35643f42ca7916a17bd"><div class="ttname"><a href="classmy__predictor.html#a2155c3dabefeb35643f42ca7916a17bd">my_predictor::Seed</a></div><div class="ttdeci">int Seed</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:143</div></div>
<div class="ttc" id="aclassmy__predictor_html_a2ccf32344fdcfef386cedaa61b5521fc"><div class="ttname"><a href="classmy__predictor.html#a2ccf32344fdcfef386cedaa61b5521fc">my_predictor::USE_ALT_ON_NA</a></div><div class="ttdeci">int8_t USE_ALT_ON_NA</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:109</div></div>
<div class="ttc" id="aclassmy__predictor_html_a39363df17e3b593440ce3822b3f2c644"><div class="ttname"><a href="classmy__predictor.html#a39363df17e3b593440ce3822b3f2c644">my_predictor::Retire_ch_i</a></div><div class="ttdeci">folded_history Retire_ch_i[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:121</div></div>
<div class="ttc" id="aclassmy__predictor_html_a3b35e11ab8bbce00ed31537699dc35a9"><div class="ttname"><a href="classmy__predictor.html#a3b35e11ab8bbce00ed31537699dc35a9">my_predictor::update_brindirect</a></div><div class="ttdeci">void update_brindirect(uint64_t pc, uint8_t branch_type, uint8_t taken, uint64_t target)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:448</div></div>
<div class="ttc" id="aclassmy__predictor_html_a3c31bf7e43653332e3f68f4f1504ce61"><div class="ttname"><a href="classmy__predictor.html#a3c31bf7e43653332e3f68f4f1504ce61">my_predictor::Retire_ptghist</a></div><div class="ttdeci">uint64_t Retire_ptghist</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:120</div></div>
<div class="ttc" id="aclassmy__predictor_html_a3d435142cf9fecfadddf866847ccc2a0"><div class="ttname"><a href="classmy__predictor.html#a3d435142cf9fecfadddf866847ccc2a0">my_predictor::PtIumRetire</a></div><div class="ttdeci">int PtIumRetire</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:146</div></div>
<div class="ttc" id="aclassmy__predictor_html_a4028e1ba2f51db2af6188210637a214e"><div class="ttname"><a href="classmy__predictor.html#a4028e1ba2f51db2af6188210637a214e">my_predictor::Fetch_ptghist</a></div><div class="ttdeci">uint64_t Fetch_ptghist</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:115</div></div>
<div class="ttc" id="aclassmy__predictor_html_a45d9ef7fa0487f57f351cf2f6ea5819b"><div class="ttname"><a href="classmy__predictor.html#a45d9ef7fa0487f57f351cf2f6ea5819b">my_predictor::GTAG</a></div><div class="ttdeci">uint64_t GTAG[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:133</div></div>
<div class="ttc" id="aclassmy__predictor_html_a45e6673ced07f37b30a0d5546863a33d"><div class="ttname"><a href="classmy__predictor.html#a45e6673ced07f37b30a0d5546863a33d">my_predictor::logg</a></div><div class="ttdeci">int logg[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:131</div></div>
<div class="ttc" id="aclassmy__predictor_html_a4aa23d1773ee62e1d3ab3b2269b226f8"><div class="ttname"><a href="classmy__predictor.html#a4aa23d1773ee62e1d3ab3b2269b226f8">my_predictor::ghist</a></div><div class="ttdeci">uint8_t ghist[HISTBUFFERLENGTH]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:113</div></div>
<div class="ttc" id="aclassmy__predictor_html_a4c77eb4b95aa891760e140b8161d6d94"><div class="ttname"><a href="classmy__predictor.html#a4c77eb4b95aa891760e140b8161d6d94">my_predictor::my_predictor</a></div><div class="ttdeci">my_predictor(void)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:152</div></div>
<div class="ttc" id="aclassmy__predictor_html_a52f780b12df3d3419ec3e0413b06a634"><div class="ttname"><a href="classmy__predictor.html#a52f780b12df3d3419ec3e0413b06a634">my_predictor::PtIumFetch</a></div><div class="ttdeci">int PtIumFetch</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:147</div></div>
<div class="ttc" id="aclassmy__predictor_html_a6372e888f8ae3ce08fb0a605ba7e610a"><div class="ttname"><a href="classmy__predictor.html#a6372e888f8ae3ce08fb0a605ba7e610a">my_predictor::AltBank</a></div><div class="ttdeci">int AltBank</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:140</div></div>
<div class="ttc" id="aclassmy__predictor_html_a652d18c9eab8562c5ff3a258e78357e0"><div class="ttname"><a href="classmy__predictor.html#a652d18c9eab8562c5ff3a258e78357e0">my_predictor::LongestMatchPred</a></div><div class="ttdeci">uint64_t LongestMatchPred</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:141</div></div>
<div class="ttc" id="aclassmy__predictor_html_a6b236b1eb329cf71ba5e30711d8c29b2"><div class="ttname"><a href="classmy__predictor.html#a6b236b1eb329cf71ba5e30711d8c29b2">my_predictor::Fetch_ch_i</a></div><div class="ttdeci">folded_history Fetch_ch_i[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:116</div></div>
<div class="ttc" id="aclassmy__predictor_html_a6d098cb1da9878998aa06bddeeed6a06"><div class="ttname"><a href="classmy__predictor.html#a6d098cb1da9878998aa06bddeeed6a06">my_predictor::TB</a></div><div class="ttdeci">int TB[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:130</div></div>
<div class="ttc" id="aclassmy__predictor_html_a776aada921cf93ffe06bfb057538b56c"><div class="ttname"><a href="classmy__predictor.html#a776aada921cf93ffe06bfb057538b56c">my_predictor::TICK</a></div><div class="ttdeci">int TICK</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:37</div></div>
<div class="ttc" id="aclassmy__predictor_html_a7e10ba446010f108b68d5067f1f3292a"><div class="ttname"><a href="classmy__predictor.html#a7e10ba446010f108b68d5067f1f3292a">my_predictor::HistoryUpdate</a></div><div class="ttdeci">void HistoryUpdate(uint64_t pc, uint8_t branch_type, uint8_t taken, uint64_t target, uint64_t &amp;Y, folded_history *H, folded_history *G, folded_history *J)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:417</div></div>
<div class="ttc" id="aclassmy__predictor_html_a7fb782514eacbd6e26cffc0468c58b67"><div class="ttname"><a href="classmy__predictor.html#a7fb782514eacbd6e26cffc0468c58b67">my_predictor::Tagepred</a></div><div class="ttdeci">void Tagepred()</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:319</div></div>
<div class="ttc" id="aclassmy__predictor_html_a838495c734b45086c8345bad2a087d02"><div class="ttname"><a href="classmy__predictor.html#a838495c734b45086c8345bad2a087d02">my_predictor::m</a></div><div class="ttdeci">int m[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:36</div></div>
<div class="ttc" id="aclassmy__predictor_html_a83f6c46c488fdee5006019a6045f704c"><div class="ttname"><a href="classmy__predictor.html#a83f6c46c488fdee5006019a6045f704c">my_predictor::GI</a></div><div class="ttdeci">int GI[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:132</div></div>
<div class="ttc" id="aclassmy__predictor_html_a8982b3919ed4db66dda832bd6b7c6bc6"><div class="ttname"><a href="classmy__predictor.html#a8982b3919ed4db66dda832bd6b7c6bc6">my_predictor::gindex</a></div><div class="ttdeci">uint64_t gindex(uint64_t pc, int bank, folded_history *ch_i)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:292</div></div>
<div class="ttc" id="aclassmy__predictor_html_a91112dc020e4699842c27038ca08cfd9"><div class="ttname"><a href="classmy__predictor.html#a91112dc020e4699842c27038ca08cfd9">my_predictor::MYRANDOM</a></div><div class="ttdeci">int MYRANDOM()</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:309</div></div>
<div class="ttc" id="aclassmy__predictor_html_a91a48bdd788cbe48d8a1a576eb660d26"><div class="ttname"><a href="classmy__predictor.html#a91a48bdd788cbe48d8a1a576eb660d26">my_predictor::tage_pred</a></div><div class="ttdeci">uint64_t tage_pred</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:138</div></div>
<div class="ttc" id="aclassmy__predictor_html_a92592882bc342677d4f2b957242d8611"><div class="ttname"><a href="classmy__predictor.html#a92592882bc342677d4f2b957242d8611">my_predictor::pred_taken</a></div><div class="ttdeci">uint64_t pred_taken</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:136</div></div>
<div class="ttc" id="aclassmy__predictor_html_aac853bc20941cc22f4de9af0c5969e20"><div class="ttname"><a href="classmy__predictor.html#aac853bc20941cc22f4de9af0c5969e20">my_predictor::PredSpecIUM</a></div><div class="ttdeci">uint64_t PredSpecIUM(uint64_t pred)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:384</div></div>
<div class="ttc" id="aclassmy__predictor_html_ab44056ddbcead54e02b5d45b544071cd"><div class="ttname"><a href="classmy__predictor.html#ab44056ddbcead54e02b5d45b544071cd">my_predictor::IUMPred</a></div><div class="ttdeci">specentry * IUMPred</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:148</div></div>
<div class="ttc" id="aclassmy__predictor_html_abf0f60311c278e242290aa7807b25866"><div class="ttname"><a href="classmy__predictor.html#abf0f60311c278e242290aa7807b25866">my_predictor::rtable</a></div><div class="ttdeci">regionentry * rtable</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:127</div></div>
<div class="ttc" id="aclassmy__predictor_html_ac8c3aedeefa14e48d632d1af73e4f612"><div class="ttname"><a href="classmy__predictor.html#ac8c3aedeefa14e48d632d1af73e4f612">my_predictor::predict_brindirect</a></div><div class="ttdeci">uint64_t predict_brindirect(uint64_t pc)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:355</div></div>
<div class="ttc" id="aclassmy__predictor_html_ad3625767e44327932b0cb021da57e527"><div class="ttname"><a href="classmy__predictor.html#ad3625767e44327932b0cb021da57e527">my_predictor::UpdateSpecIUM</a></div><div class="ttdeci">void UpdateSpecIUM(uint64_t target)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:398</div></div>
<div class="ttc" id="aclassmy__predictor_html_ad7b1fa96d579f049496a08a2f8cfd30e"><div class="ttname"><a href="classmy__predictor.html#ad7b1fa96d579f049496a08a2f8cfd30e">my_predictor::gtag</a></div><div class="ttdeci">uint16_t gtag(uint64_t pc, int bank, folded_history *ch0, folded_history *ch1)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:300</div></div>
<div class="ttc" id="aclassmy__predictor_html_adac9667f549790f3fee2e33ba44967f5"><div class="ttname"><a href="classmy__predictor.html#adac9667f549790f3fee2e33ba44967f5">my_predictor::gtable</a></div><div class="ttdeci">gentry * gtable[NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:126</div></div>
<div class="ttc" id="aclassmy__predictor_html_ae115d316ee7974561767dc8d60a3629c"><div class="ttname"><a href="classmy__predictor.html#ae115d316ee7974561767dc8d60a3629c">my_predictor::fetch_history_update</a></div><div class="ttdeci">void fetch_history_update(uint64_t pc, uint8_t branch_type, uint8_t taken, uint64_t target)</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:409</div></div>
<div class="ttc" id="aclassmy__predictor_html_aed22eafb25f2b85f6b69aaabb76adb17"><div class="ttname"><a href="classmy__predictor.html#aed22eafb25f2b85f6b69aaabb76adb17">my_predictor::Retire_ch_t</a></div><div class="ttdeci">folded_history Retire_ch_t[2][NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:122</div></div>
<div class="ttc" id="aclassmy__predictor_html_afbc178a4a584bdfc059a7fe72abeda2d"><div class="ttname"><a href="classmy__predictor.html#afbc178a4a584bdfc059a7fe72abeda2d">my_predictor::Fetch_ch_t</a></div><div class="ttdeci">folded_history Fetch_ch_t[2][NHIST+1]</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:117</div></div>
<div class="ttc" id="ahashed__perceptron_8cc_html_a3f0eab8cf8b221b98f2db047ad2958d8"><div class="ttname"><a href="hashed__perceptron_8cc.html#a3f0eab8cf8b221b98f2db047ad2958d8">MINHIST</a></div><div class="ttdeci">#define MINHIST</div><div class="ttdef"><b>Definition:</b> hashed_perceptron.cc:65</div></div>
<div class="ttc" id="ahashed__perceptron_8cc_html_a41ba038635d6b8c9533fdfc5e2cf55d6"><div class="ttname"><a href="hashed__perceptron_8cc.html#a41ba038635d6b8c9533fdfc5e2cf55d6">MAXHIST</a></div><div class="ttdeci">#define MAXHIST</div><div class="ttdef"><b>Definition:</b> hashed_perceptron.cc:61</div></div>
<div class="ttc" id="ainstruction_8h_html"><div class="ttname"><a href="instruction_8h.html">instruction.h</a></div></div>
<div class="ttc" id="ainstruction_8h_html_a8e3c9ad09efe21bf2f8b83cba460bc5e"><div class="ttname"><a href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5e">branch_type</a></div><div class="ttdeci">branch_type</div><div class="ttdef"><b>Definition:</b> instruction.h:30</div></div>
<div class="ttc" id="ainstruction_8h_html_a8e3c9ad09efe21bf2f8b83cba460bc5ea089c56d2c14fd417e6a80d2d72bba2bb"><div class="ttname"><a href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5ea089c56d2c14fd417e6a80d2d72bba2bb">BRANCH_INDIRECT_CALL</a></div><div class="ttdeci">@ BRANCH_INDIRECT_CALL</div><div class="ttdef"><b>Definition:</b> instruction.h:36</div></div>
<div class="ttc" id="ainstruction_8h_html_a8e3c9ad09efe21bf2f8b83cba460bc5ea81be858e590c9840eca00415668e14d2"><div class="ttname"><a href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5ea81be858e590c9840eca00415668e14d2">BRANCH_DIRECT_CALL</a></div><div class="ttdeci">@ BRANCH_DIRECT_CALL</div><div class="ttdef"><b>Definition:</b> instruction.h:35</div></div>
<div class="ttc" id="ainstruction_8h_html_a8e3c9ad09efe21bf2f8b83cba460bc5eacfd0d336eece485adcd2708e1f8bb5ea"><div class="ttname"><a href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5eacfd0d336eece485adcd2708e1f8bb5ea">BRANCH_CONDITIONAL</a></div><div class="ttdeci">@ BRANCH_CONDITIONAL</div><div class="ttdef"><b>Definition:</b> instruction.h:34</div></div>
<div class="ttc" id="ainstruction_8h_html_a8e3c9ad09efe21bf2f8b83cba460bc5eae5e75f5730c30b38e3d5e3398bab6b10"><div class="ttname"><a href="instruction_8h.html#a8e3c9ad09efe21bf2f8b83cba460bc5eae5e75f5730c30b38e3d5e3398bab6b10">BRANCH_INDIRECT</a></div><div class="ttdeci">@ BRANCH_INDIRECT</div><div class="ttdef"><b>Definition:</b> instruction.h:33</div></div>
<div class="ttc" id="aittage__64KB_8h_html_a72a12bfc3f8e34e361d1281e4c550c07"><div class="ttname"><a href="ittage__64KB_8h.html#a72a12bfc3f8e34e361d1281e4c550c07">HISTBUFFERLENGTH</a></div><div class="ttdeci">#define HISTBUFFERLENGTH</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:28</div></div>
<div class="ttc" id="aittage__64KB_8h_html_a7f6cb6699071a947cb1cd16375aacf5c"><div class="ttname"><a href="ittage__64KB_8h.html#a7f6cb6699071a947cb1cd16375aacf5c">LOGSPEC</a></div><div class="ttdeci">#define LOGSPEC</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:31</div></div>
<div class="ttc" id="aittage__64KB_8h_html_a822378f7ad3d5f52315217a0c98f22cd"><div class="ttname"><a href="ittage__64KB_8h.html#a822378f7ad3d5f52315217a0c98f22cd">LOGG</a></div><div class="ttdeci">#define LOGG</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:17</div></div>
<div class="ttc" id="aittage__64KB_8h_html_aa0e8b80aa29135a83d096ec150fb9a2d"><div class="ttname"><a href="ittage__64KB_8h.html#aa0e8b80aa29135a83d096ec150fb9a2d">STEP1</a></div><div class="ttdeci">#define STEP1</div></div>
<div class="ttc" id="aittage__64KB_8h_html_aa86ad64c29b4f67a941aea7366c17a37"><div class="ttname"><a href="ittage__64KB_8h.html#aa86ad64c29b4f67a941aea7366c17a37">LOGTICK</a></div><div class="ttdeci">#define LOGTICK</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:27</div></div>
<div class="ttc" id="aittage__64KB_8h_html_aceb7835db76fab36997cd7f90c1e1b4a"><div class="ttname"><a href="ittage__64KB_8h.html#aceb7835db76fab36997cd7f90c1e1b4a">NHIST</a></div><div class="ttdeci">#define NHIST</div><div class="ttdef"><b>Definition:</b> ittage_64KB.h:9</div></div>
<div class="ttc" id="aittage__64KB_8h_html_ad6138f70b4a60e8b031ce44d728a898d"><div class="ttname"><a href="ittage__64KB_8h.html#ad6138f70b4a60e8b031ce44d728a898d">STEP2</a></div><div class="ttdeci">#define STEP2</div></div>
<div class="ttc" id="atage__sc__l_8cc_html_a0451c34405aa969aa227ee6ebc47fbe8"><div class="ttname"><a href="tage__sc__l_8cc.html#a0451c34405aa969aa227ee6ebc47fbe8">TBITS</a></div><div class="ttdeci">#define TBITS</div><div class="ttdef"><b>Definition:</b> tage_sc_l.cc:240</div></div>
<div class="ttc" id="atage__sc__l_8cc_html_a90ecac4f603f0aaa9bc2fe8254b50a21"><div class="ttname"><a href="tage__sc__l_8cc.html#a90ecac4f603f0aaa9bc2fe8254b50a21">ch_i</a></div><div class="ttdeci">folded_history ch_i[NHIST+1]</div><div class="ttdef"><b>Definition:</b> tage_sc_l.cc:274</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bb96c794dce6e9a35fd171b1615f9993.html">btb</a></li><li class="navelem"><a class="el" href="ittage__64KB_8h.html">ittage_64KB.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
